@using SFA.DAS.Apim.Developer.Web.Infrastructure
@using SFA.DAS.Apim.Developer.Web.AppStart
@model SFA.DAS.Apim.Developer.Web.Models.SubscriptionViewModel
@{
    if (Model.AuthenticationType == AuthenticationType.Employer)
    {
        Layout = "_LayoutEmployer";    
    }
    else if (Model.AuthenticationType == AuthenticationType.External)
    {
        Layout = "_LayoutGeneric";
    }
    ViewData["Title"] = "Key for API";
}

@* ReSharper disable once Razor.SectionNotResolved *@
@section breadcrumb {
    <span class="das-js-back-link"></span>
}


<div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">

        @if (Model.ShowRenewedBanner)
        {
            <div class="govuk-panel govuk-panel--confirmation" id="renew-confirmation-banner">
                <h1 class="govuk-panel__title">
                    Key renewed
                </h1>
            </div>
        }
        <h1 class="govuk-heading-xl">Key for API</h1>
        <p class="govuk-body">
            You need to copy the API key and give it to your developer, this gives them permission to connect to the API on your behalf.
        </p>
        
        <h2 class="govuk-heading-l">@Model.Product.DisplayName</h2>
        <p class="govuk-body">@Model.Product.Description</p>
        <p class="govuk-body">You'll need to send the API key and the API page to your developer.<br/>
                              You can do this by copying the information below and pasting it into an email.</p>
        
        <div class="app-summary-card" role="region">
            <header class="app-summary-card__header">
                <button data-copy-target="key-@Model.Product.Key" data-accessible-label="@Model.Product.DisplayName"></button>
                <code class="app-code" id="Key-@Model.Product.Key">
                    @Model.Product.Key
                    <br><br>
                    https://blah.blah
                </code>
            </header>
        </div>
        
        <details class="govuk-details govuk-!-margin-bottom-0" data-module="govuk-details">
            <summary class="govuk-details__summary">
                <span class="govuk-details__summary-text">
                    Do you need a new key?
                </span>
            </summary>
            <div class="govuk-details__text">
                Renewing the key will disable the previous key and will stop your API from working until you use the new key. <a asp-route="@Model.RenewKeyRouteName" asp-route-id="@Model.Product.Id" asp-route-ukprn="@Model.Ukprn" asp-route-employerAccountId="@Model.EmployerAccountId" asp-route-externalId="@Model.ExternalId" class="govuk-link govuk-link--no-visited-state">Renew Key</a>.
            </div>
        </details>
    </div>
</div>